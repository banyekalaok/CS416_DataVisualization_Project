<!DOCTYPE html>
<html>
<head>
  <title>Connecticut County Map and Ohio Population Bar Chart</title>
  <meta name="description" content="Interactive visualizations using D3.js: a map of Connecticut counties and a bar chart of Ohio's population from 2010 to 2022.">
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <style>
    path {
      fill: lightblue;
      stroke: black;
    }
    .button-container {
      text-align: center;
      margin-top: 20px;
    }
    .button-container button {
      padding: 10px 20px;
      margin: 5px;
      font-size: 16px;
    }
    .bar {
      fill: steelblue;
    }
    .bar:hover {
      fill: darkblue;
    }
    .axis-label {
      font-size: 14px;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <h1>Connecticut County Map and Ohio Population Bar Chart</h1>
  <p>This page displays an interactive map of Connecticut counties and a bar chart of Ohio's population from 2010 to 2022 using D3.js. Use the buttons below to switch between the visualizations.</p>

  <div id="map-container">
    <svg id="map" width="800" height="600"></svg>
  </div>

  <div id="chart-container" class="hidden">
    <svg id="chart" width="800" height="600"></svg>
  </div>

  <div class="button-container">
    <button id="map-button">Prev</button>
    <button id="chart-button">Next</button>
  </div>

  <script>
    // Connecticut County Map
    var mapWidth = 800;
    var mapHeight = 600;

    var mapSvg = d3.select("#map")
                   .attr("width", mapWidth)
                   .attr("height", mapHeight);

    var projection = d3.geoMercator()
                       .center([-72.6940, 41.6032]) // Center the map on Connecticut
                       .scale(13000) // Scale the map to fit within the SVG
                       .translate([mapWidth / 2, mapHeight / 2]);

    var path = d3.geoPath().projection(projection);

    d3.json("ct-counties.geojson").then(function(data) {
      mapSvg.selectAll("path")
            .data(data.features)
            .enter().append("path")
            .attr("d", path)
            .attr("class", "county");
    }).catch(function(error) {
      console.log(error);
    });

    // Ohio Population Bar Chart
    var chartWidth = 800;
    var chartHeight = 600;
    var margin = {top: 20, right: 20, bottom: 20, left: 20};

    var data = [3580279, 3594193, 3605259, 3610314, 3614695, 3611995, 3607688, 3607615, 3611318, 3607159, 3597362, 3623355, 362620];
    var years = [2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022];

    var chartSvg = d3.select("#chart")
                     .attr("width", chartWidth)
                     .attr("height", chartHeight);

    var x = d3.scaleBand()
              .domain(years)
              .range([margin.left, chartWidth - margin.right])
              .padding(0.1);

    var y = d3.scaleLinear()
              .domain([0, d3.max(data)]).nice()
              .range([chartHeight - margin.bottom, margin.top]);

    chartSvg.append("g")
            .attr("class", "x-axis")
            .attr("transform", `translate(0,${chartHeight - margin.bottom})`)
            .call(d3.axisBottom(x).tickSizeOuter(0))
            .append("text")
            .attr("class", "axis-label")
            .attr("x", chartWidth / 2)
            .attr("y", margin.bottom - 10)
            .attr("fill", "black")
            .attr("text-anchor", "middle")
            .text("Year");

    chartSvg.append("g")
            .attr("class", "y-axis")
            .attr("transform", `translate(${margin.left},0)`)
            .call(d3.axisLeft(y))
            .append("text")
            .attr("class", "axis-label")
            .attr("x", -margin.left)
            .attr("y", margin.top - 10)
            .attr("fill", "black")
            .attr("text-anchor", "start")
            .text("Population");

    chartSvg.selectAll(".bar")
            .data(data)
            .enter().append("rect")
            .attr("class", "bar")
            .attr("x", (d, i) => x(years[i]))
            .attr("y", d => y(d))
            .attr("width", x.bandwidth())
            .attr("height", d => y(0) - y(d));

    // Button event listeners
    document.getElementById('map-button').addEventListener('click', function() {
      document.getElementById('map-container').classList.remove('hidden');
      document.getElementById('chart-container').classList.add('hidden');
    });

    document.getElementById('chart-button').addEventListener('click', function() {
      document.getElementById('map-container').classList.add('hidden');
      document.getElementById('chart-container').classList.remove('hidden');
    });
  </script>
</body>
</html>
